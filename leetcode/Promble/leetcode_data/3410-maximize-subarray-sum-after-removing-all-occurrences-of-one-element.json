{
  "id": "3410",
  "title": "Maximize Subarray Sum After Removing All Occurrences of One Element",
  "titleSlug": "maximize-subarray-sum-after-removing-all-occurrences-of-one-element",
  "difficulty": "Hard",
  "category": "Algorithms",
  "topics": [
    "Segment Tree",
    "Array",
    "Dynamic Programming"
  ],
  "content": "<p>You are given an integer array <code>nums</code>.</p>\n\n<p>You can do the following operation on the array <strong>at most</strong> once:</p>\n\n<ul>\n\t<li>Choose <strong>any</strong> integer <code>x</code> such that <code>nums</code> remains <strong>non-empty</strong> on removing all occurrences of <code>x</code>.</li>\n\t<li>Remove&nbsp;<strong>all</strong> occurrences of <code>x</code> from the array.</li>\n</ul>\n\n<p>Return the <strong>maximum</strong> <span data-keyword=\"subarray-nonempty\">subarray</span> sum across <strong>all</strong> possible resulting arrays.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [-3,2,-2,-1,3,-2,3]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">7</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>We can have the following arrays after at most one operation:</p>\n\n<ul>\n\t<li>The original array is <code>nums = [<span class=\"example-io\">-3, 2, -2, -1, <u><strong>3, -2, 3</strong></u></span>]</code>. The maximum subarray sum is <code>3 + (-2) + 3 = 4</code>.</li>\n\t<li>Deleting all occurences of <code>x = -3</code> results in <code>nums = [2, -2, -1, <strong><u><span class=\"example-io\">3, -2, 3</span></u></strong>]</code>. The maximum subarray sum is <code>3 + (-2) + 3 = 4</code>.</li>\n\t<li>Deleting all occurences of <code>x = -2</code> results in <code>nums = [<span class=\"example-io\">-3, <strong><u>2, -1, 3, 3</u></strong></span>]</code>. The maximum subarray sum is <code>2 + (-1) + 3 + 3 = 7</code>.</li>\n\t<li>Deleting all occurences of <code>x = -1</code> results in <code>nums = [<span class=\"example-io\">-3, 2, -2, <strong><u>3, -2, 3</u></strong></span>]</code>. The maximum subarray sum is <code>3 + (-2) + 3 = 4</code>.</li>\n\t<li>Deleting all occurences of <code>x = 3</code> results in <code>nums = [<span class=\"example-io\">-3, <u><strong>2</strong></u>, -2, -1, -2</span>]</code>. The maximum subarray sum is 2.</li>\n</ul>\n\n<p>The output is <code>max(4, 4, 7, 4, 2) = 7</code>.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [1,2,3,4]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">10</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>It is optimal to not perform any operations.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>-10<sup>6</sup> &lt;= nums[i] &lt;= 10<sup>6</sup></code></li>\n</ul>\n",
  "codeSnippets": {
    "cpp": "class Solution {\npublic:\n    long long maxSubarraySum(vector<int>& nums) {\n        \n    }\n};",
    "java": "class Solution {\n    public long maxSubarraySum(int[] nums) {\n        \n    }\n}",
    "python": "class Solution(object):\n    def maxSubarraySum(self, nums):\n        \"\"\"\n        :type nums: List[int]\n        :rtype: int\n        \"\"\"\n        ",
    "python3": "class Solution:\n    def maxSubarraySum(self, nums: List[int]) -> int:\n        ",
    "c": "long long maxSubarraySum(int* nums, int numsSize) {\n    \n}",
    "csharp": "public class Solution {\n    public long MaxSubarraySum(int[] nums) {\n        \n    }\n}",
    "javascript": "/**\n * @param {number[]} nums\n * @return {number}\n */\nvar maxSubarraySum = function(nums) {\n    \n};",
    "typescript": "function maxSubarraySum(nums: number[]): number {\n    \n};",
    "php": "class Solution {\n\n    /**\n     * @param Integer[] $nums\n     * @return Integer\n     */\n    function maxSubarraySum($nums) {\n        \n    }\n}",
    "swift": "class Solution {\n    func maxSubarraySum(_ nums: [Int]) -> Int {\n        \n    }\n}",
    "kotlin": "class Solution {\n    fun maxSubarraySum(nums: IntArray): Long {\n        \n    }\n}",
    "dart": "class Solution {\n  int maxSubarraySum(List<int> nums) {\n    \n  }\n}",
    "golang": "func maxSubarraySum(nums []int) int64 {\n    \n}",
    "ruby": "# @param {Integer[]} nums\n# @return {Integer}\ndef max_subarray_sum(nums)\n    \nend",
    "scala": "object Solution {\n    def maxSubarraySum(nums: Array[Int]): Long = {\n        \n    }\n}",
    "rust": "impl Solution {\n    pub fn max_subarray_sum(nums: Vec<i32>) -> i64 {\n        \n    }\n}",
    "racket": "(define/contract (max-subarray-sum nums)\n  (-> (listof exact-integer?) exact-integer?)\n  )",
    "erlang": "-spec max_subarray_sum(Nums :: [integer()]) -> integer().\nmax_subarray_sum(Nums) ->\n  .",
    "elixir": "defmodule Solution do\n  @spec max_subarray_sum(nums :: [integer]) :: integer\n  def max_subarray_sum(nums) do\n    \n  end\nend",
    "cangjie": "class Solution {\n    func maxSubarraySum(nums: Array<Int64>): Int64 {\n\n    }\n}"
  },
  "exampleTestcases": "[-3,2,-2,-1,3,-2,3]\n[1,2,3,4]",
  "hints": [
    "Use a segment tree data structure to solve the problem.",
    "Each node of the segment tree should store the subarray sum, the maximum subarray sum, the maximum prefix sum, and the maximum suffix sum within the subarray defined by that node."
  ]
}