(define (maximize-xor nums queries)
  (define (build-trie nums)
    (define trie (make-vector 2))
    (for-each (lambda (num)
                (define node trie)
                (for ([i (in-range 31 -1 -1)])
                  (define bit (bitwise-arithmetic-shift-right num i))
                  (define index (if (= (bitwise-and bit 1) 1) 1 0))
                  (if (vector-ref node index)
                      (set! node (vector-ref node index))
                      (begin
                        (vector-set! node index (make-vector 2))
                        (set! node (vector-ref node index)))))
                (vector-set! node 2 num))
              nums)
    trie)

  (define (query-xor trie num)
    (define node trie)
    (define result 0)
    (for ([i (in-range 31 -1 -1)])
      (define bit (bitwise-arithmetic-shift-right num i))
      (define index (if (= (bitwise-and bit 1) 1) 0 1))
      (if (vector-ref node index)
          (begin
            (set! result (bitwise-ior result (bitwise-arithmetic-shift-left 1 i)))
            (set! node (vector-ref node index))
            )
          (set! node (vector-ref node (- 1 index)))))
    result)

  (define trie (build-trie nums))
  (map (lambda (query) (if (zero? (second query)) -1 (query-xor trie (first query)))) queries))