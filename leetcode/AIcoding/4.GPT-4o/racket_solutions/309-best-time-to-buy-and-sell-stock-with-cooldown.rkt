(define (maxProfit prices)
  (define n (length prices))
  (define dp (make-vector n))
  (define (max a b) (if (> a b) a b))
  (define (helper i)
    (if (>= i n)
        0
        (if (vector-ref dp i)
            (vector-ref dp i)
            (let* ((do-nothing (helper (+ i 1)))
                   (do-sell (if (>= (+ i 2) n) 
                                (vector-ref dp i)
                                (+ (vector-ref prices i) (helper (+ i 2))))))
              (vector-set! dp i (max do-nothing do-sell))
              (vector-ref dp i)))))
  (helper 0))