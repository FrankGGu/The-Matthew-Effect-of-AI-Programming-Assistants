(define (count-hills-and-valleys arr)
  (define (is-hill? a b c) (and (> b a) (> b c)))
  (define (is-valley? a b c) (and (< b a) (< b c)))
  (define (count hills valleys lst)
    (if (< (length lst) 3)
        (+ hills valleys)
        (let ((a (list-ref lst 0))
              (b (list-ref lst 1))
              (c (list-ref lst 2)))
          (if (is-hill? a b c)
              (count (+ hills 1) valleys (cdr lst))
              (if (is-valley? a b c)
                  (count hills (+ valleys 1) (cdr lst))
                  (count hills valleys (cdr lst))))))
    )
  (count 0 0 arr))