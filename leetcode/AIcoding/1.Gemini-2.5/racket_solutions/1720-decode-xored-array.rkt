(define (decode-xored-array encoded first)
  (let-values (((reversed-decoded-list current-val)
                (for/fold ((acc (list first))
                           (prev-val first))
                          ((enc-val encoded))
                  (let ((next-val (bitwise-xor prev-val enc-val)))
                    (values (cons next-val acc)
                            next-val)))))
    (reverse reversed-decoded-list)))