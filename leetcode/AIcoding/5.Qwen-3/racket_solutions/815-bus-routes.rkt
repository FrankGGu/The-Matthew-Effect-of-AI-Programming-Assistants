#lang racket

(define (num-buses-to-source-target routes source target)
  (define n (length routes))
  (define adj (make-hash))
  (for ([i (in-range n)])
    (for ([stop (in-list (list-ref routes i))])
      (hash-update! adj stop (Î» (lst) (cons i lst)) '())))
  (define visited (make-hash))
  (define queue (queue-empty))
  (queue-put! queue (cons source #f))
  (hash-set! visited source #t)
  (let loop ()
    (when (not (queue-empty? queue))
      (define current (queue-get! queue))
      (define stop (car current))
      (define buses (cdr current))
      (when (= stop target)
        (if buses
            (add1 buses)
            0))
      (for ([route (in-list (hash-ref adj stop))])
        (when (not (hash-has-key? visited route))
          (hash-set! visited route #t)
          (queue-put! queue (cons route (if buses (add1 buses) 0)))))
      (loop))))

(define (main)
  (define input (read))
  (define routes (list-ref input 0))
  (define source (list-ref input 1))
  (define target (list-ref input 2))
  (displayln (num-buses-to-source-target routes source target)))

(main)