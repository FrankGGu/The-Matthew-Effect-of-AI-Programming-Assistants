(define (count-triplets arr)
  (define n (length arr))
  (define prefix (make-vector (+ n 1) 0))
  (for ([i (in-range n)])
    (vector-set! prefix (+ i 1) (bitwise-xor (vector-ref prefix i) (vector-ref arr i))))
  (define result 0)
  (for ([i (in-range n)])
    (for ([k (in-range (+ i 1) n)])
      (when (= (bitwise-xor (vector-ref prefix (+ k 1)) (vector-ref prefix i))
               (bitwise-xor (vector-ref prefix (+ k 1)) (vector-ref prefix (+ i 1))))
        (set! result (+ result 1)))))
  result)