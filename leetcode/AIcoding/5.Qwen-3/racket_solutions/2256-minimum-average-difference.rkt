(define (minimum-average-difference nums)
  (let* ((n (length nums))
         (total (apply + nums))
         (prefix (make-vector n 0))
         (min-avg (vector-ref nums 0)))
    (vector-set! prefix 0 (car nums))
    (for ([i (in-range 1 n)])
      (vector-set! prefix i (+ (vector-ref prefix (- i 1)) (list-ref nums i))))
    (for ([i (in-range n)])
      (let* ((left-sum (vector-ref prefix i))
             (left-avg (/ left-sum (+ i 1)))
             (right-sum (- total left-sum))
             (right-avg (if (> (- n i 1) 0) (/ right-sum (- n i 1)) 0))
             (diff (abs (- left-avg right-avg))))
        (when (< diff min-avg)
          (set! min-avg diff))))
    min-avg))