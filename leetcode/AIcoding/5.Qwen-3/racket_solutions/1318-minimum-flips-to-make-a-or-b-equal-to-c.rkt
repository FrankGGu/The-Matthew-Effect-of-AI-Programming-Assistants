(define (min-flips a b c)
  (define (count-flips x y z)
    (let loop ((x x) (y y) (z z) (res 0))
      (if (or (zero? x) (zero? y) (zero? z))
          res
          (let* ((bit-x (bitwise-and x 1))
                 (bit-y (bitwise-and y 1))
                 (bit-z (bitwise-and z 1))
                 (current-or (bitwise-ior bit-x bit-y)))
            (loop (bitwise-shift-right x 1)
                  (bitwise-shift-right y 1)
                  (bitwise-shift-right z 1)
                  (+ res (if (= current-or bit-z) 0 1)))))))
  (count-flips a b c))