#lang racket

(define (split-message message limit)
  (define len (string-length message))
  (define n (floor (/ len (- limit 1))))
  (define m (if (> (* n (- limit 1)) len) n (+ n 1)))
  (define result '())
  (define i 0)
  (define j 0)
  (define k 0)
  (define (loop)
    (when (< k m)
      (set! j (min (+ j (- limit 1)) len))
      (set! result (cons (substring message i j) result))
      (set! i j)
      (set! k (+ k 1))
      (loop)))
  (loop)
  (reverse result))