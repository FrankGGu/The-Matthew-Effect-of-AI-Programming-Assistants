(define (apply-discount-to-prices items discount)
  (define (parse-price s)
    (let ((parts (string-split s " ")))
      (if (and (= (length parts) 2) (string=? (list-ref parts 0) "$"))
          (string->number (list-ref parts 1))
          #f)))
  (define (format-price p)
    (string-append "$" (number->string (exact-round (* p (- 1 discount))))))
  (map (lambda (item)
         (let ((price (parse-price item)))
           (if price
               (format-price price)
               item)))
       items))