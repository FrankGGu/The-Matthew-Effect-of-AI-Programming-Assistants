(define (count-servers grid)
  (define rows (length grid))
  (define cols (if (> rows 0) (length (car grid)) 0))
  (define row-count (make-vector rows 0))
  (define col-count (make-vector cols 0))
  (for ([i (in-range rows)])
    (for ([j (in-range cols)])
      (when (= (list-ref (list-ref grid i) j) 1)
        (vector-set! row-count i (+ (vector-ref row-count i) 1))
        (vector-set! col-count j (+ (vector-ref col-count j) 1)))))
  (define count 0)
  (for ([i (in-range rows)])
    (for ([j (in-range cols)])
      (when (and (= (list-ref (list-ref grid i) j) 1)
                 (> (vector-ref row-count i) 1)
                 (> (vector-ref col-count j) 1))
        (set! count (+ count 1)))))
  count)