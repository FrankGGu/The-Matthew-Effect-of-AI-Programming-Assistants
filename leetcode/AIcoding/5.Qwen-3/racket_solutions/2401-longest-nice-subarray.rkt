(define (longest-nice-subarray nums)
  (define n (length nums))
  (define seen (make-hash))
  (define result 0)
  (define left 0)
  (for ([right (in-range n)])
    (when (hash-has-key? seen (list-ref nums right))
      (set! left (max left (add1 (hash-ref seen (list-ref nums right))))))
    (hash-set! seen (list-ref nums right) right)
    (set! result (max result (- right left 1))))
  result)