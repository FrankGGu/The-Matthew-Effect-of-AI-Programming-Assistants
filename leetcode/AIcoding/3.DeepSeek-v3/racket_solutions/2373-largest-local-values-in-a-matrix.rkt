(define/contract (largest-local grid)
  (-> (listof (listof exact-integer?)) (listof (listof exact-integer?)))
  (define n (length grid))
  (define result (make-list (- n 2) (make-list (- n 2) 0)))
  (for ([i (in-range (- n 2))])
    (for ([j (in-range (- n 2))])
      (define max-val 0)
      (for ([di (in-range 3)])
        (for ([dj (in-range 3)])
          (set! max-val (max max-val (list-ref (list-ref grid (+ i di)) (+ j dj))))))
      (list-set! (list-ref result i) j max-val)))
  result)