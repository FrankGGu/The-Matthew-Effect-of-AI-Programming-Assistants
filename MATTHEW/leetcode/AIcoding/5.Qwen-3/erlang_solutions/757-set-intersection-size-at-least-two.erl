-module(solution).
-export([intersection_size_at_least_two/1]).

intersection_size_at_least_two(Intervals) ->
    Sorted = lists:sort(fun(A, B) -> hd(A) < hd(B) end, Intervals),
    {Result, _} = lists:foldl(fun(Interval, {Res, Last}) ->
        [Start, End] = Interval,
        if
            End < Last ->
                {Res, Last};
            true ->
                case Res of
                    [] ->
                        {[[Start, End]], End};
                    [[S, E | _] | _] when S == Start andalso E == End ->
                        {Res, End};
                    [[S, E | _] | _] when S == Start ->
                        {[ [Start, End] | Res ], End};
                    _ ->
                        {[ [Start, End] | Res ], End}
                end
        end
    end, {[], -1}, Sorted),
    length(lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <- lists:reverse([lists:tl(I) || I <-