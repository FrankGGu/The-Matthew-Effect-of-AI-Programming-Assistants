(define (sliding-subarray-beauty nums k)
  (define n (length nums))
  (define res '())
  (define freq (make-vector 101 0))
  (define (update-freq i val)
    (vector-set! freq val (+ (vector-ref freq val) i)))
  (define (get-median)
    (let loop ((i 0) (count 0))
      (if (>= count (quotient k 2))
          i
          (loop (+ i 1) (+ count (vector-ref freq i))))))
  (for ([i (in-range k)])
    (update-freq 1 (list-ref nums i)))
  (set! res (cons (get-median) res))
  (for ([i (in-range k n)])
    (update-freq -1 (list-ref nums (- i k)))
    (update-freq 1 (list-ref nums i))
    (set! res (cons (get-median) res)))
  (reverse res))