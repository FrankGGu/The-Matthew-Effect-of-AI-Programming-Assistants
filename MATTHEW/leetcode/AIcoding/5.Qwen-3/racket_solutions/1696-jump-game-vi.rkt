(define (max-jump-game-vi nums k)
  (define n (length nums))
  (define dp (make-vector n 0))
  (vector-set! dp 0 (vector-ref nums 0))
  (define q (list (cons 0 (vector-ref nums 0))))
  (for ([i (in-range 1 n)])
    (set! q (filter (lambda (x) (<= (- i (car x)) k)) q))
    (vector-set! dp i (+ (vector-ref nums i) (cdr (car q))))
    (set! q (append q (list (cons i (vector-ref dp i)))))
    (set! q (sort q (lambda (a b) (> (cdr a) (cdr b)))))
    (when (> (length q) k)
      (set! q (take q k))))
  (vector-ref dp (- n 1)))