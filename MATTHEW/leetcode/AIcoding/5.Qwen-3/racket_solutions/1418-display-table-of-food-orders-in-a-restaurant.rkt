#lang racket

(define (display-table orders)
  (define foods (set))
  (define tables (set))
  (for ([order orders])
    (define name (list-ref order 0))
    (define table (string->number (list-ref order 1)))
    (define food (list-ref order 2))
    (set-add! foods food)
    (set-add! tables table))
  (define food-list (sort (set->list foods) string<?))
  (define table-list (sort (set->list tables) <))
  (define table-map (make-hash))
  (for ([table table-list])
    (hash-set! table-map table (make-hash)))
  (for ([order orders])
    (define table (string->number (list-ref order 1)))
    (define food (list-ref order 2))
    (define count (hash-ref (hash-ref table-map table) food 0))
    (hash-set! (hash-ref table-map table) food (+ count 1)))
  (define result (list (cons "Table" (map (lambda (f) f) food-list))))
  (for ([table table-list])
    (define row (list (number->string table)))
    (for ([food food-list])
      (define count (hash-ref (hash-ref table-map table) food 0))
      (set! row (append row (list (number->string count)))))
    (set! result (append result (list row))))
  (map (lambda (row) (string-join (map (lambda (s) s) row) ",")) result))