#lang racket

(define (path-existence-queries n queries)
  (define adj (make-hash))
  (for ([i (in-range n)])
    (hash-set! adj i '()))
  (for ([q (in-query queries)])
    (define u (car q))
    (define v (cadr q))
    (hash-update! adj u (λ (lst) (cons v lst)))
    (hash-update! adj v (λ (lst) (cons u lst))))
  (define visited (make-hash))
  (define (dfs node target)
    (when (not (hash-has-key? visited node))
      (hash-set! visited node #t)
      (if (= node target)
          #t
          (for/or ([neigh (hash-ref adj node)])
            (dfs neigh target)))))
  (for/list ([q (in-query queries)])
    (define u (car q))
    (define v (cadr q))
    (set! visited (make-hash))
    (dfs u v)))