(define (search nums target)
  (define (helper left right)
    (if (> left right)
        -1
        (let* ((mid (quotient (+ left right) 2))
               (num (list-ref nums mid)))
          (cond ((= num target) mid)
                ((< (list-ref nums left) num)
                 (if (and (< (list-ref nums left) target) (< target num))
                     (helper left (sub1 mid))
                     (helper (add1 mid) right)))
                ((> (list-ref nums left) num)
                 (if (and (< (list-ref nums left) target) (< target num))
                     (helper left (sub1 mid))
                     (helper (add1 mid) right)))
                (else (if (< (list-ref nums left) target)
                          (helper (add1 mid) right)
                          (helper left (sub1 mid))))))))
  (helper 0 (sub1 (length nums))))