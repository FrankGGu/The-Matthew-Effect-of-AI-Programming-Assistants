(define (special-substring? s k)
  (define n (string-length s))
  (define (count-chars start end)
    (let ((freq (make-hash)))
      (for ((i (in-range start end)))
        (hash-update! freq (string-ref s i) add1 0))
      freq))
  (define (has-special? freq)
    (for/and ((v (in-hash-values freq)))
      (>= v 2)))
  (let loop ((i 0) (result ""))
    (if (>= i (- n k))
        result
        (let* ((end (+ i k))
               (current-freq (count-chars i end)))
          (if (has-special? current-freq)
              (let ((sub (substring s i end)))
                (loop (+ i 1) sub))
              (loop (+ i 1) result))))))