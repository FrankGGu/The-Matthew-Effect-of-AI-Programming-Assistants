(define (longest-well-performing-interval times)
  (define (helper)
    (let ((map (make-hash))
          (max-len 0)
          (count 0))
      (hash-set! map 0 -1)
      (for ([i (in-range (length times))])
        (when (> (list-ref times i) 8)
          (set! count (+ count 1)))
        (when (< (list-ref times i) 9)
          (set! count (- count 1)))
        (if (hash-has-key? map count)
            (set! max-len (max max-len (- i (hash-ref map count))))
            (hash-set! map count i)))
      max-len))
  (helper))