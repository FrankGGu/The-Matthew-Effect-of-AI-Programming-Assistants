(define (reinitialize-permutation n)
  (let* ((current-idx 1)
         (ops 0))
    (let loop ((c current-idx)
               (o ops))
      (let ((next-c (if (even? c)
                        (quotient c 2)
                        (+ (quotient n 2) (quotient (- c 1) 2)))))
        (if (= next-c 1)
            (+ o 1)
            (loop next-c (+ o 1)))))))