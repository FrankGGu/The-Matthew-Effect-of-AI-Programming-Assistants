(define (compute-prefix-increasing-vector nums-vec)
  (define n (vector-length nums-vec))
  (if (zero? n)
      (vector)
      (let ([prefix-inc-vec (make-vector n)])
        (vector-set! prefix-inc-vec 0 #t)
        (for ([i (in-range 1 n)])
          (vector-set! prefix-inc-vec i
                       (and (vector-ref prefix-inc-vec (- i 1))
                            (< (vector-ref nums-vec (- i 1)) (vector-ref nums-vec i)))))
        prefix-inc-vec)))

(define (compute-suffix-increasing-vector nums-vec)
  (define n (vector-length nums-vec))
  (if (zero? n)
      (vector)
      (let ([suffix-inc-vec (make-vector n)])
        (vector-set! suffix-inc-vec (- n 1) #t)
        (for ([i (in-range (- n 2) -1 -1)])
          (vector-set! suffix-inc-vec i
                       (and (vector-ref suffix-inc-vec (+ i 1))
                            (< (vector-ref nums-vec i) (vector-ref nums-vec (+ i 1)))))
        suffix-inc-vec)))

(define (can-partition-into-two-increasing-subarrays nums)
  (define n (length nums))
  (if (< n 2)
      #f
      (let* ([nums-vec (list->vector nums)]
             [prefix-inc-vec (compute-prefix-increasing-vector nums-vec)]
             [suffix-inc-vec (compute-suffix-increasing-vector nums-vec)])
        (for ([k (in-range 1 n)])
          (define first-subarray-is-inc (vector-ref prefix-inc-vec (- k 1)))
          (define second-subarray-is-inc (vector-ref suffix-inc-vec k))
          (when (and first-subarray-is-inc second-subarray-is-inc)
            (touch #t)))
        #f)))

(module+ test
  (require rackunit)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 2 3 0 4 5)) #t)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 2 3 2 1)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 2 3 4 5)) #t)
  (check-equal? (can-partition-into-two-increasing-subarrays '(5 4 3 2 1)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 0 1)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 2)) #t)
  (check-equal? (can-partition-into-two-increasing-subarrays '(2 1)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '()) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 2 3 4 5 6 7 8 9 10)) #t)
  (check-equal? (can-partition-into-two-increasing-subarrays '(10 9 8 7 6 5 4 3 2 1)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 3 2 4)) #f)
  (check-equal? (can-partition-into-two-increasing-subarrays '(1 2 3 1 2 3)) #t)
  )