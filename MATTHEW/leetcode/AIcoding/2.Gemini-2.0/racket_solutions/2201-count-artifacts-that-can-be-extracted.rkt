(define (count-artifacts n artifacts dig)
  (let* ((dig-set (set))
         (extracted 0))
    (for ([d dig])
      (set-add! dig-set d))
    (for ([artifact artifacts])
      (let* ((r1 (list-ref artifact 0))
             (c1 (list-ref artifact 1))
             (r2 (list-ref artifact 2))
             (c2 (list-ref artifact 3))
             (all-dug? #t))
        (for ([r (in-range r1 (+ r2 1))]
              [c (in-range c1 (+ c2 1))])
          (unless (set-member? dig-set (list r c))
            (set! all-dug? #f)))
        (if all-dug? (set! extracted (+ extracted 1)))))
    extracted))