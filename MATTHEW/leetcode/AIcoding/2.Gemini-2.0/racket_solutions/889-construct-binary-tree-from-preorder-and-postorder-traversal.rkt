(define (construct-from-pre-post pre post)
  (define (build-tree pre-start pre-end post-start post-end)
    (if (< pre-start pre-end)
        (let* ((root-val (vector-ref pre pre-start))
               (root (cons root-val '()))
               (left-root-val (vector-ref pre (+ pre-start 1)))
               (left-root-index (let loop ((i post-start))
                                   (if (= (vector-ref post i) left-root-val)
                                       i
                                       (loop (+ i 1)))))
               (left-size (- left-root-index post-start 1)))
          (set-cdr! root (cons (build-tree (+ pre-start 1) (+ pre-start left-size 2) post-start (+ post-start left-size 1))
                               (cons (build-tree (+ pre-start left-size 2) pre-end (+ post-start left-size 2) (- post-end 1)) '())))
          root)
        (if (= pre-start pre-end)
            (cons (vector-ref pre pre-start) '())
            '())))

  (build-tree 0 (- (vector-length pre) 1) 0 (- (vector-length post) 1)))