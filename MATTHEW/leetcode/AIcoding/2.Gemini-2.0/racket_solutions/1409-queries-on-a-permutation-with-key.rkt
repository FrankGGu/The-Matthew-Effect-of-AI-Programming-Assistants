(define (process-queries queries m)
  (let* ((p (list->vector (range 1 (+ m 1))))
         (result (make-vector (length queries))))
    (for/list ((query queries)
               (i (in-range (length queries))))
      (let* ((idx (for/first ((j (in-range m))
                               #:when (= (vector-ref p j) query))
                          j)))
        (vector-set! result i idx)
        (for ((k (in-range idx 0 -1)))
          (vector-set! p k (vector-ref p (- k 1))))
        (vector-set! p 0 query)
        idx))))