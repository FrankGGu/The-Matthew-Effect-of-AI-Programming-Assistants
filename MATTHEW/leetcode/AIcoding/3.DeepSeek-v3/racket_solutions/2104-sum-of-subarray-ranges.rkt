(define/contract (sub-array-ranges nums)
  (-> (listof exact-integer?) exact-integer?)
  (define n (length nums))
  (define sum 0)
  (for ([i (in-range n)])
    (define min-val (list-ref nums i))
    (define max-val (list-ref nums i))
    (for ([j (in-range i n)])
      (set! min-val (min min-val (list-ref nums j)))
      (set! max-val (max max-val (list-ref nums j)))
      (set! sum (+ sum (- max-val min-val)))))
  sum)