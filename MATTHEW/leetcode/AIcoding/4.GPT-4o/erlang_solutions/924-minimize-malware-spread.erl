-module(solution).
-export([minimize_malware_spread/2]).

minimize_malware_spread(Graph, Initial) ->
    N = length(Graph),
    InitialSorted = lists:sort(Initial),
    MalwareCount = maps:fold(fun(_, V, Acc) -> Acc + (if V == 1 -> 1; true -> 0 end) end, 0, Graph),
    {MinNode, _} = lists:foldl(fun(Node, {BestNode, BestCount}) ->
        case lists:member(Node, InitialSorted) of
            true -> {BestNode, BestCount};
            false ->
                Count = count_infected(Node, Graph, InitialSorted),
                if Count > BestCount -> {Node, Count}; true -> {BestNode, BestCount} end
        end
    end, {hd(InitialSorted), -1}, lists:seq(0, N-1)),
    MinNode.

count_infected(Node, Graph, Initial) ->
    lists:foldl(fun(I, Acc) -> if
        lists:member(I, Graph(Node)) -> Acc + 1; true -> Acc
    end, 0, Initial).

Graph(Node) ->
    % Define your adjacency list representation here, based on the input format.
    % This is a placeholder function to create the adjacency list.
    % The actual adjacency list should be constructed according to the problem statement.
    [].