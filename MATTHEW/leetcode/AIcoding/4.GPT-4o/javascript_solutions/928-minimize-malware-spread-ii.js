var minimizeMalwareSpread = function(graph, initial) {
    const n = graph.length;
    const initialSet = new Set(initial);
    const visited = new Array(n).fill(false);
    const component = [];
    const componentSize = [];
    const malwareCount = new Array(n).fill(0);

    const dfs = (node, comp) => {
        visited[node] = true;
        comp.push(node);
        for (let neighbor = 0; neighbor < n; neighbor++) {
            if (graph[node][neighbor] === 1 && !visited[neighbor]) {
                dfs(neighbor, comp);
            }
        }
    };

    for (let i = 0; i < n; i++) {
        if (!visited[i]) {
            const comp = [];
            dfs(i, comp);
            component.push(comp);
            componentSize.push(comp.length);
        }
    }

    for (let i = 0; i < component.length; i++) {
        let count = 0;
        for (const node of component[i]) {
            if (initialSet.has(node)) {
                count++;
            }
        }
        if (count === 1) {
            const node = component[i].find(n => initialSet.has(n));
            malwareCount[node] += componentSize[i];
        }
    }

    let result = -1;
    let maxSize = -1;

    for (const node of initial) {
        if (malwareCount[node] > maxSize || (malwareCount[node] === maxSize && (result === -1 || node < result))) {
            maxSize = malwareCount[node];
            result = node;
        }
    }

    return result;
};