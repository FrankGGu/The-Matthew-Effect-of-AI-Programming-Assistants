(define (single-number nums)
  (define (count-bits nums)
    (foldl (lambda (n acc)
              (for/fold ([i 0])
                         ([bit (in-range 32)])
                (if (zero? (bitwise-arithmetic-shift-right n bit))
                    acc
                    (vector-set! acc bit (add1 (vector-ref acc bit))))))
            (make-vector 32 0)
            nums))
  (define bits (count-bits nums))
  (define result 0)
  (for ([i (in-range 32)])
    (if (= (vector-ref bits i) 1)
        (set! result (bitwise-ior result (bitwise-arithmetic-shift-left 1 i)))))
  result)