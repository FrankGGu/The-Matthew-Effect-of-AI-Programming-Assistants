(define (minSpaceWastedKResizing A K)
  (define n (length A))
  (define dp (make-vector (add1 n) (make-vector (add1 K) (expt 10 9))))
  (vector-set! dp 0 0)
  (for ([i (in-range 1 (add1 n))])
    (for ([k (in-range 1 (add1 K))])
      (define total 0)
      (define max (vector-ref A (sub1 i)))
      (for ([j (in-range i 0 -1)])
        (set! total (+ total (vector-ref A (sub1 j))))
        (set! max (max max (vector-ref A (sub1 j))))
        (define waste (+ (* (sub1 i j) max) (- total)))
        (vector-set! dp i k (min (vector-ref dp i k) (+ waste (vector-ref dp j (sub1 k)))))))
  (vector-ref dp n K))

(minSpaceWastedKResizing '(1 2 3 4 5) 2)