(define (count-pairs strs target)
  (define (count-suffix-prefix suffix-prefix)
    (foldl (lambda (s acc)
             (if (string-prefix? target s)
                 (+ acc (hash-ref suffix-prefix (substring target (string-length s)) 0))
                 acc))
           0 strs))
  (define suffix-prefix (make-hash))
  (for-each (lambda (s) 
              (hash-set! suffix-prefix (substring target (string-length s)) 
                          (+ (hash-ref suffix-prefix (substring target (string-length s)) 0) 1)))
            strs)
  (count-suffix-prefix suffix-prefix))

(define (num-pairs strs target)
  (count-pairs strs target))