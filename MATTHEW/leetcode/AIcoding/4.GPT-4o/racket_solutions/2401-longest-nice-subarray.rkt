(define (longest-nice-subarray nums)
  (define (helper nums)
    (define n (length nums))
    (define longest 0)
    (define current-start 0)
    (define current-end 0)
    (define seen (make-vector 1024 #f))

    (while (< current-end n)
      (let ((num (vector-ref nums current-end)))
        (if (vector-ref seen num)
            (begin
              (set! longest (max longest (- current-end current-start)))
              (set! current-start (1+ (vector-ref seen num)))
              (for ([i (in-range current-start current-end)])
                (vector-set! seen (vector-ref nums i) #f))
              (set! (vector-set! seen num) current-end)
              )
            (begin
              (set! (vector-set! seen num) current-end)
              (set! current-end (1+ current-end))
              )
          )
        )
      )
    )
    (max longest (- current-end current-start)))

  (if (null? nums) 0 (helper (vector->list nums))))