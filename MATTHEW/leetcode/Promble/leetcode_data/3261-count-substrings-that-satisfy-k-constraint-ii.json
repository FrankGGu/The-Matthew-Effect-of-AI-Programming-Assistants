{
  "id": "3261",
  "title": "Count Substrings That Satisfy K-Constraint II",
  "titleSlug": "count-substrings-that-satisfy-k-constraint-ii",
  "difficulty": "Hard",
  "category": "Algorithms",
  "topics": [
    "Array",
    "String",
    "Binary Search",
    "Prefix Sum",
    "Sliding Window"
  ],
  "content": "<p>You are given a <strong>binary</strong> string <code>s</code> and an integer <code>k</code>.</p>\n\n<p>You are also given a 2D integer array <code>queries</code>, where <code>queries[i] = [l<sub>i</sub>, r<sub>i</sub>]</code>.</p>\n\n<p>A <strong>binary string</strong> satisfies the <strong>k-constraint</strong> if <strong>either</strong> of the following conditions holds:</p>\n\n<ul>\n\t<li>The number of <code>0</code>&#39;s in the string is at most <code>k</code>.</li>\n\t<li>The number of <code>1</code>&#39;s in the string is at most <code>k</code>.</li>\n</ul>\n\n<p>Return an integer array <code>answer</code>, where <code>answer[i]</code> is the number of <span data-keyword=\"substring-nonempty\">substrings</span> of <code>s[l<sub>i</sub>..r<sub>i</sub>]</code> that satisfy the <strong>k-constraint</strong>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;0001111&quot;, k = 2, queries = [[0,6]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">[26]</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>For the query <code>[0, 6]</code>, all substrings of <code>s[0..6] = &quot;0001111&quot;</code> satisfy the k-constraint except for the substrings <code>s[0..5] = &quot;000111&quot;</code> and <code>s[0..6] = &quot;0001111&quot;</code>.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;010101&quot;, k = 1, queries = [[0,5],[1,4],[2,3]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">[15,9,3]</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The substrings of <code>s</code> with a length greater than 3 do not satisfy the k-constraint.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= s.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>s[i]</code> is either <code>&#39;0&#39;</code> or <code>&#39;1&#39;</code>.</li>\n\t<li><code>1 &lt;= k &lt;= s.length</code></li>\n\t<li><code>1 &lt;= queries.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>queries[i] == [l<sub>i</sub>, r<sub>i</sub>]</code></li>\n\t<li><code>0 &lt;= l<sub>i</sub> &lt;= r<sub>i</sub> &lt; s.length</code></li>\n\t<li>All queries are distinct.</li>\n</ul>\n",
  "codeSnippets": {
    "cpp": "class Solution {\npublic:\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& queries) {\n        \n    }\n};",
    "java": "class Solution {\n    public long[] countKConstraintSubstrings(String s, int k, int[][] queries) {\n        \n    }\n}",
    "python": "class Solution(object):\n    def countKConstraintSubstrings(self, s, k, queries):\n        \"\"\"\n        :type s: str\n        :type k: int\n        :type queries: List[List[int]]\n        :rtype: List[int]\n        \"\"\"\n        ",
    "python3": "class Solution:\n    def countKConstraintSubstrings(self, s: str, k: int, queries: List[List[int]]) -> List[int]:\n        ",
    "c": "/**\n * Note: The returned array must be malloced, assume caller calls free().\n */\nlong long* countKConstraintSubstrings(char* s, int k, int** queries, int queriesSize, int* queriesColSize, int* returnSize) {\n    \n}",
    "csharp": "public class Solution {\n    public long[] CountKConstraintSubstrings(string s, int k, int[][] queries) {\n        \n    }\n}",
    "javascript": "/**\n * @param {string} s\n * @param {number} k\n * @param {number[][]} queries\n * @return {number[]}\n */\nvar countKConstraintSubstrings = function(s, k, queries) {\n    \n};",
    "typescript": "function countKConstraintSubstrings(s: string, k: number, queries: number[][]): number[] {\n    \n};",
    "php": "class Solution {\n\n    /**\n     * @param String $s\n     * @param Integer $k\n     * @param Integer[][] $queries\n     * @return Integer[]\n     */\n    function countKConstraintSubstrings($s, $k, $queries) {\n        \n    }\n}",
    "swift": "class Solution {\n    func countKConstraintSubstrings(_ s: String, _ k: Int, _ queries: [[Int]]) -> [Int] {\n        \n    }\n}",
    "kotlin": "class Solution {\n    fun countKConstraintSubstrings(s: String, k: Int, queries: Array<IntArray>): LongArray {\n        \n    }\n}",
    "dart": "class Solution {\n  List<int> countKConstraintSubstrings(String s, int k, List<List<int>> queries) {\n    \n  }\n}",
    "golang": "func countKConstraintSubstrings(s string, k int, queries [][]int) []int64 {\n    \n}",
    "ruby": "# @param {String} s\n# @param {Integer} k\n# @param {Integer[][]} queries\n# @return {Integer[]}\ndef count_k_constraint_substrings(s, k, queries)\n    \nend",
    "scala": "object Solution {\n    def countKConstraintSubstrings(s: String, k: Int, queries: Array[Array[Int]]): Array[Long] = {\n        \n    }\n}",
    "rust": "impl Solution {\n    pub fn count_k_constraint_substrings(s: String, k: i32, queries: Vec<Vec<i32>>) -> Vec<i64> {\n        \n    }\n}",
    "racket": "(define/contract (count-k-constraint-substrings s k queries)\n  (-> string? exact-integer? (listof (listof exact-integer?)) (listof exact-integer?))\n  )",
    "erlang": "-spec count_k_constraint_substrings(S :: unicode:unicode_binary(), K :: integer(), Queries :: [[integer()]]) -> [integer()].\ncount_k_constraint_substrings(S, K, Queries) ->\n  .",
    "elixir": "defmodule Solution do\n  @spec count_k_constraint_substrings(s :: String.t, k :: integer, queries :: [[integer]]) :: [integer]\n  def count_k_constraint_substrings(s, k, queries) do\n    \n  end\nend",
    "cangjie": "class Solution {\n    func countKConstraintSubstrings(s: String, k: Int64, queries: Array<Array<Int64>>): Array<Int64> {\n\n    }\n}"
  },
  "exampleTestcases": "\"0001111\"\n2\n[[0,6]]\n\"010101\"\n1\n[[0,5],[1,4],[2,3]]",
  "hints": [
    "Answering online queries is tough. Try to answer them offline since the queries are known beforehand.",
    "For each index, how do you calculate the left boundary so that the given condition is satisfied?",
    "Using the precomputed left boundaries and a range data structure, you can now answer the queries optimally."
  ]
}